// 八卦基础数据
export const TRIGRAMS: { [key: string]: { symbol: string; lines: number[]; element: string; nature: string } } = {
  '乾': { symbol: '☰', lines: [1, 1, 1], element: '金', nature: '天' },
  '兑': { symbol: '☱', lines: [0, 1, 1], element: '金', nature: '泽' },
  '离': { symbol: '☲', lines: [1, 0, 1], element: '火', nature: '火' },
  '震': { symbol: '☳', lines: [0, 0, 1], element: '木', nature: '雷' },
  '巽': { symbol: '☴', lines: [1, 1, 0], element: '木', nature: '风' },
  '坎': { symbol: '☵', lines: [0, 1, 0], element: '水', nature: '水' },
  '艮': { symbol: '☶', lines: [1, 0, 0], element: '土', nature: '山' },
  '坤': { symbol: '☷', lines: [0, 0, 0], element: '土', nature: '地' }
};

// 六十四卦卦名
export const GUA_NAMES = [
  ['乾为天', '天泽履', '天火同人', '天雷无妄', '天风姤', '天水讼', '天山遁', '天地否'],
  ['泽天夬', '兑为泽', '泽火革', '泽雷随', '泽风大过', '泽水困', '泽山咸', '泽地萃'],
  ['火天大有', '火泽睽', '离为火', '火雷噬嗑', '火风鼎', '火水未济', '火山旅', '火地晋'],
  ['雷天大壮', '雷泽归妹', '雷火丰', '震为雷', '雷风恒', '雷水解', '雷山小过', '雷地豫'],
  ['风天小畜', '风泽中孚', '风火家人', '风雷益', '巽为风', '风水涣', '风山渐', '风地观'],
  ['水天需', '水泽节', '水火既济', '水雷屯', '水风井', '坎为水', '水山蹇', '水地比'],
  ['山天大畜', '山泽损', '山火贲', '山雷颐', '山风蛊', '山水蒙', '艮为山', '山地剥'],
  ['地天泰', '地泽临', '地火明夷', '地雷复', '地风升', '地水师', '地山谦', '坤为地']
];

// 纳甲配置（天干配置）
// 根据《增删卜易》和《卜筮正宗》的纳甲法
// 乾纳甲壬：内卦（初二三爻）纳甲，外卦（四五上爻）纳壬
// 坤纳乙癸：内卦（初二三爻）纳乙，外卦（四五上爻）纳癸
// 其余六卦：内外卦纳同一天干
export const NAJIA: { [key: string]: string[] } = {
  '乾': ['甲', '甲', '甲', '壬', '壬', '壬'],  // 乾卦：内卦纳甲，外卦纳壬
  '坤': ['乙', '乙', '乙', '癸', '癸', '癸'],  // 坤卦：内卦纳乙，外卦纳癸
  '震': ['庚', '庚', '庚', '庚', '庚', '庚'],  // 震卦纳庚
  '巽': ['辛', '辛', '辛', '辛', '辛', '辛'],  // 巽卦纳辛
  '坎': ['戊', '戊', '戊', '戊', '戊', '戊'],  // 坎卦纳戊
  '离': ['己', '己', '己', '己', '己', '己'],  // 离卦纳己
  '艮': ['丙', '丙', '丙', '丙', '丙', '丙'],  // 艮卦纳丙
  '兑': ['丁', '丁', '丁', '丁', '丁', '丁']   // 兑卦纳丁
};

// 地支配置
export const EARTH_BRANCHES: { [key: string]: string[] } = {
  '乾': ['子', '寅', '辰', '午', '申', '戌'],
  '坤': ['未', '巳', '卯', '丑', '亥', '酉'],
  '震': ['子', '寅', '辰', '午', '申', '戌'],
  '巽': ['丑', '亥', '酉', '未', '巳', '卯'],
  '坎': ['寅', '辰', '午', '申', '戌', '子'],
  '离': ['卯', '丑', '亥', '酉', '未', '巳'],
  '艮': ['辰', '午', '申', '戌', '子', '寅'],
  '兑': ['巳', '卯', '丑', '亥', '酉', '未']
};

// 五行属性
export const FIVE_ELEMENTS: { [key: string]: string } = {
  '子': '水', '丑': '土', '寅': '木', '卯': '木',
  '辰': '土', '巳': '火', '午': '火', '未': '土',
  '申': '金', '酉': '金', '戌': '土', '亥': '水'
};

// 六亲关系（基于卦宫五行）
export const SIX_RELATIVES_MAP: { [key: string]: { [key: string]: string } } = {
  '金': { '金': '兄弟', '木': '妻财', '水': '子孙', '火': '官鬼', '土': '父母' },
  '木': { '木': '兄弟', '土': '妻财', '火': '子孙', '金': '官鬼', '水': '父母' },
  '水': { '水': '兄弟', '火': '妻财', '木': '子孙', '土': '官鬼', '金': '父母' },
  '火': { '火': '兄弟', '金': '妻财', '土': '子孙', '水': '官鬼', '木': '父母' },
  '土': { '土': '兄弟', '水': '妻财', '金': '子孙', '木': '官鬼', '火': '父母' }
};

// 六神配置
export const SIX_SPIRITS = ['青龙', '朱雀', '勾陈', '螣蛇', '白虎', '玄武'];

// 十天干
export const TEN_STEMS = ['甲', '乙', '丙', '丁', '戊', '己', '庚', '辛', '壬', '癸'];

// 十二地支
export const TWELVE_BRANCHES = ['子', '丑', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥'];

// 空亡表：根据日干支所在旬确定空亡
// key: 旬首天干地支, value: 空亡的两个地支
export const KONG_WANG_MAP: { [key: string]: [string, string] } = {
  '甲子': ['戌', '亥'],  // 甲子旬：戌亥空
  '甲戌': ['申', '酉'],  // 甲戌旬：申酉空
  '甲申': ['午', '未'],  // 甲申旬：午未空
  '甲午': ['辰', '巳'],  // 甲午旬：辰巳空
  '甲辰': ['寅', '卯'],  // 甲辰旬：寅卯空
  '甲寅': ['子', '丑']   // 甲寅旬：子丑空
};

// 五行生克关系
export const FIVE_ELEMENTS_RELATION = {
  // 五行相生：木生火、火生土、土生金、金生水、水生木
  generates: {
    '木': '火',
    '火': '土',
    '土': '金',
    '金': '水',
    '水': '木'
  },
  // 五行相克：木克土、土克水、水克火、火克金、金克木
  controls: {
    '木': '土',
    '土': '水',
    '水': '火',
    '火': '金',
    '金': '木'
  }
};

// 五行旺相休囚死表（按月令）
// 根据《增删卜易》和《卜筮正宗》
// 旺：当令，最强
// 相：我生者（旺者所生），次强
// 休：生我者（生旺者），中等
// 囚：克我者（克旺者），衰弱
// 死：我克者（旺者所克），最弱
// 特别注意：辰戌丑未为四季月，土旺当令
export const FIVE_ELEMENTS_SEASON: { [monthBranch: string]: { [element: string]: '旺' | '相' | '休' | '囚' | '死' } } = {
  // 春季：寅卯月（木旺）
  '寅': { '木': '旺', '火': '相', '水': '休', '金': '囚', '土': '死' },
  '卯': { '木': '旺', '火': '相', '水': '休', '金': '囚', '土': '死' },

  // 四季月：辰月（土旺）- 春季之末
  '辰': { '土': '旺', '金': '相', '火': '休', '木': '囚', '水': '死' },

  // 夏季：巳午月（火旺）
  '巳': { '火': '旺', '土': '相', '木': '休', '水': '囚', '金': '死' },
  '午': { '火': '旺', '土': '相', '木': '休', '水': '囚', '金': '死' },

  // 四季月：未月（土旺）- 夏季之末
  '未': { '土': '旺', '金': '相', '火': '休', '木': '囚', '水': '死' },

  // 秋季：申酉月（金旺）
  '申': { '金': '旺', '水': '相', '土': '休', '火': '囚', '木': '死' },
  '酉': { '金': '旺', '水': '相', '土': '休', '火': '囚', '木': '死' },

  // 四季月：戌月（土旺）- 秋季之末
  '戌': { '土': '旺', '金': '相', '火': '休', '木': '囚', '水': '死' },

  // 冬季：亥子月（水旺）
  '亥': { '水': '旺', '木': '相', '金': '休', '土': '囚', '火': '死' },
  '子': { '水': '旺', '木': '相', '金': '休', '土': '囚', '火': '死' },

  // 四季月：丑月（土旺）- 冬季之末
  '丑': { '土': '旺', '金': '相', '火': '休', '木': '囚', '水': '死' }
};

// 地支六合关系
export const LIU_HE: { [key: string]: string } = {
  '子': '丑', '丑': '子',
  '寅': '亥', '亥': '寅',
  '卯': '戌', '戌': '卯',
  '辰': '酉', '酉': '辰',
  '巳': '申', '申': '巳',
  '午': '未', '未': '午'
};

// 地支六冲关系
export const LIU_CHONG: { [key: string]: string } = {
  '子': '午', '午': '子',
  '丑': '未', '未': '丑',
  '寅': '申', '申': '寅',
  '卯': '酉', '酉': '卯',
  '辰': '戌', '戌': '辰',
  '巳': '亥', '亥': '巳'
};

// 地支三合关系
// 三合局需要三个地支同时出现才能成局
export const SAN_HE: { [key: string]: { branches: string[]; element: string; type: string } } = {
  '水局': { branches: ['申', '子', '辰'], element: '水', type: '三合' },
  '火局': { branches: ['寅', '午', '戌'], element: '火', type: '三合' },
  '金局': { branches: ['巳', '酉', '丑'], element: '金', type: '三合' },
  '木局': { branches: ['亥', '卯', '未'], element: '木', type: '三合' }
};

// 地支所属三合局查询
export const BRANCH_SAN_HE: { [key: string]: string } = {
  '申': '水局', '子': '水局', '辰': '水局',
  '寅': '火局', '午': '火局', '戌': '火局',
  '巳': '金局', '酉': '金局', '丑': '金局',
  '亥': '木局', '卯': '木局', '未': '木局'
};

// 十二长生表（用于判断化进化退）
// 每个五行在十二地支中的长生、沐浴、冠带、临官、帝旺、衰、病、死、墓、绝、胎、养
export const TWELVE_GROWTH: { [element: string]: { [branch: string]: number } } = {
  '水': {
    '申': 1,  // 长生
    '酉': 2,  // 沐浴
    '戌': 3,  // 冠带
    '亥': 4,  // 临官
    '子': 5,  // 帝旺
    '丑': 6,  // 衰
    '寅': 7,  // 病
    '卯': 8,  // 死
    '辰': 9,  // 墓
    '巳': 10, // 绝
    '午': 11, // 胎
    '未': 12  // 养
  },
  '木': {
    '亥': 1, '子': 2, '丑': 3, '寅': 4, '卯': 5, '辰': 6,
    '巳': 7, '午': 8, '未': 9, '申': 10, '酉': 11, '戌': 12
  },
  '火': {
    '寅': 1, '卯': 2, '辰': 3, '巳': 4, '午': 5, '未': 6,
    '申': 7, '酉': 8, '戌': 9, '亥': 10, '子': 11, '丑': 12
  },
  '金': {
    '巳': 1, '午': 2, '未': 3, '申': 4, '酉': 5, '戌': 6,
    '亥': 7, '子': 8, '丑': 9, '寅': 10, '卯': 11, '辰': 12
  },
  '土': {
    '申': 1, '酉': 2, '戌': 3, '亥': 4, '子': 5, '丑': 6,
    '寅': 7, '卯': 8, '辰': 9, '巳': 10, '午': 11, '未': 12
  }
};

// 世应位置配置（根据卦宫）
export const SHI_YING_POSITIONS: { [key: number]: [number, number] } = {
  0: [3, 0], // 八纯卦
  1: [0, 3], // 一世卦
  2: [1, 4], // 二世卦
  3: [2, 5], // 三世卦
  4: [4, 1], // 四世卦
  5: [5, 2], // 五世卦
  6: [3, 0], // 游魂卦
  7: [2, 5]  // 归魂卦
};
